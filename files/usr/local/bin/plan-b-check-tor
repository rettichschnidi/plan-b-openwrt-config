#!/bin/sh

readonly board_name=$(cat /tmp/sysinfo/board_name)

curl --max-time 5 -s --proxy socks5h://localhost:9050 http://google.ch/  --output /dev/null 2>&1

if [ $? == 0 ]; then
  logger -t plan-b Tor is up!
  echo 1 > /sys/class/leds/${board_name}:lan/brightness
else
  logger -t plan-b Tor is down!
  echo 0 > /sys/class/leds/${board_name}:lan/brightness
fi
